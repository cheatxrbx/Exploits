local uis = game:GetService("UserInputService")
print("Script has been activated!")
local ws = Instance.new("IntValue")
ws.Parent = script
ws.Name = "W/S"
ws.Value = 3

print("Adding \"A/D\"")
local ad = Instance.new("IntValue")
ad.Parent = script
ad.Name = "A/D"
ad.Value = 3
print("Added")

print("Adding \"Q/E\"")
local qe = Instance.new("IntValue")
qe.Parent = script
qe.Name = "Q/E"
qe.Value = 3
print("Added")

print("Setting vars...")
local currentactive = 0
local flying = false
local wsadqe = {ws, ad, qe}
local multi = {1, 1, 0.707, 0.577}
local plr = game.Players.LocalPlayer
local bv
print("Done!")

print("Attempting to initialize...")
if not plr.Character.PrimaryPart:FindFirstChild("FlightForce") then
    print("Velocity not found! Creating..")
	bv = Instance.new("BodyVelocity")
	bv.Parent = plr.Character.PrimaryPart
	bv.Name = "FlightForce"
    print("BodyVelocity created, settings properties...")
	bv.MaxForce = Vector3.new(0, 0, 0)
	bv.Velocity = Vector3.new(0, 0, 0)
    print("Created!")
else
    print("BV found!")
	bv = plr.Character.PrimaryPart.FlightForce
end

uis.InputBegan:Connect(function(key, chat)
	if chat then return end
    
	if key.KeyCode == Enum.KeyCode.W then
		ws.Value = 1
	end

	if key.KeyCode == Enum.KeyCode.S then
		ws.Value = 2
	end

	if key.KeyCode == Enum.KeyCode.D then
		ad.Value = 1
	end

	if key.KeyCode == Enum.KeyCode.A then
		ad.Value = 2
	end
	
	if key.KeyCode == Enum.KeyCode.E then
		qe.Value = 1
	end
	
	if key.KeyCode == Enum.KeyCode.Q then
		qe.Value = 2
	end

	if key.KeyCode == Enum.KeyCode.F then
		if not flying then
            print("Activating flight..")
			flying = true
			bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            print("Active")
		else
            print("Disabling flight..")
			flying = false
			bv.MaxForce = Vector3.new(0, 0, 0)
			bv.Velocity = Vector3.new(0, 0, 0)
            print("Done")
		end
	end

end)

uis.InputEnded:Connect(function(key, chat)
	if chat then return end

	if key.KeyCode == Enum.KeyCode.W or key.KeyCode == Enum.KeyCode.S then
		ws.Value = 3
	end

	if key.KeyCode == Enum.KeyCode.A or key.KeyCode == Enum.KeyCode.D then
		ad.Value = 3
	end

	if key.KeyCode == Enum.KeyCode.E or key.KeyCode == Enum.KeyCode.Q then
		qe.Value = 3
	end

end)

while wait() do
	local currentactive = 1
	local veladds = {
		1,
		-1,
		0
	}

	for _, v in ipairs(script:GetChildren()) do
		if v.Value ~= 3 then
			currentactive = currentactive + 1
		end
	end

	bv.Velocity = ((plr:GetMouse().Hit.LookVector * veladds[ws.Value]) + (plr:GetMouse().Hit.RightVector * veladds[ad.Value]) + (plr:GetMouse().Hit.UpVector * veladds[qe.Value])) * 50 * multi[currentactive]
end
